import "package://pkg.pkl-lang.org/github.com/alphagov/pkl-concourse-pipeline/pkl-concourse-pipeline@0.0.1#/Pipeline.pkl"
import "package://pkg.pkl-lang.org/github.com/alphagov/pkl-concourse-pipeline/pkl-concourse-pipeline@0.0.1#/TaskConfig.pkl"

class PayGitHubResource extends Pipeline.Resource {
    type = "git"
    icon = "github"
}

anonymousConcourseRunnerResource = new TaskConfig.AnonymousResource {
    type = "registry-image"
    source = new {
        ["repository"] = "governmentdigitalservice/pay-concourse-runner"
        ["tag"] = "latest"
    }
}

payCiGitHubResource: PayGitHubResource = new {
    name = "pay-ci"
    source = new Mapping {
        ["uri"] = "https://github.com/alphagov/pay-ci"
        ["branch"] = "master"
    }
}